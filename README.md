# System Design социальной сети для курса по System Design

## Функциональные требования

- публикация поста с фотографией, небольшим описанием и привязкой к конкретному месту путешествия;
- оценка и комментарии постов других путешественников;
- подписка на других путешественников, чтобы следить за их активностью;
- поиск популярных мест для путешествий и просмотр постов с этих мест;
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке;

## Нефункциональные требования
- DAU 10 000 000
- Доступность 99.95
- Данные храним всегда
- Сезонность: летом и в новогодние праздники x3
- Аудитория СНГ
- Активность:
    - Пользователь в среднем раз в неделю публикует пост
    - Пользователь в среднем 5 раз в сутки смотрит ленту
    - Пользователь в среднем оставлят 3 комментария в сутки
    - Пользователь в среднем читает 10 комментария в сутки
    - Пользователь в среднем ставит 10 лайков в сутки
    - Пользователь в среднем ищет популярные места для путешествий раз в месяц
    - Пользователь в среднем совершает 2 подписки (или отписки) в сутки
- Лимиты:
    - Фотография в посте - максимум 2 Мб
    - Количество фотографий в посте - 1
    - Описание - максимум 1000 символов
    - Комментарий - в среднем 100 символов
    - У пользователя может быть максимум 100 000 подписчиков и 100 000 подписок
- Тайминги:
    - Создание поста - 3с
    - Получение первых 20 постов в ленте - 2с
    - Оценка поста / комментарий / подписка - 1с

## Нагрузка
### Посты
- RPS (write) = 10 000 000 / 7 / 86400 = 17
- RPS (read) = 10 000 000 * 5 / 86400 = 579
### Реакции
- RPS (write) = 10 000 000 * 10 / 86400 = 1158
### Комментарии
- RPS (write) = 10 000 000 * 3 / 86400 = 347
- RPS (read) = 10 000 000 * 10 / 86400 = 1158
### Поиск популярных мест
- RPS (read) = 10 000 000 / 30 / 86400 = 4
### Подписки
- RPS (write) = 10 000 000 * 2 / 86400 = 231

## Траффик
### Посты
- Модель:
    - id 8b
    - user_id 8b
    - img_url 256b
    - description 2000b
    - location 16b
    - created_at 8b
    - ВСЕГО: 2296b

- write (meta) = 17 * 2296b = 39032 = 0.04 Мб/c
- write (media) = 17 * 2Мб = 34 Мб/c

- read (meta) = 579 * 2296b * 20 (постов на странице) = 26587680 = 27 Мб/c
- read (media) = 597 * 2Мб * 20 = 23880 Мб/c = 24 Гб/c

### Реакции
- Модель
    - user_id 8b
    - post_id 8b
    - created_at 8b
    - ВСЕГО: 24b

- write = 1158 * 24b = 27792 = 0.03 Мб/с

### Комментарии
- Модель
    - user_id 8b
    - post_id 8b
    - text 200b
    - created_at 8b
    - ВСЕГО: 224b

- write = 347 * 224b = 77728 = 0.03 Мб/с
- read = 1158 * 224b = 259392 = 0.3 Мб/с

### Поиск популярных мест (по 10 шт.)
- Модель
    - img_url 256b
    - description 1000b
    - location 16b
    - ВСЕГО: 1272b

- read (meta) = 4 * 1272b * 10 = 50880 = 0,05 Мб/с
- read (media) = 4 * 2Мб * 10 = 80 Мб/с

### Подписки
- Модель
    - user_id 8b
    - author_id 8b
    - created_at 8b
    - ВСЕГО: 24b

- write = 231 * 24b = 5544 = 0,005 Мб/с
